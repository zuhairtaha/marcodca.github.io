{"version":3,"sources":["../src/Routes.js"],"names":["routes","then","json","notes","Notes","data","get","req","res","sendFile","path","join","__dirname","status","send","getAllNotes","end","error","getSingleNote","params","noteTitle","post","newNote","Note","body","title","content","tags","addNote","collectionOfNotes","delete","deleteNote","editNote","filterNotesByTag","tag"],"mappings":";;;;;;AAAA;;;;AACA;;;;AAEA;;AACA;;;;AAIA,MAAMA,SAAS,wBAAf;;AAEA,6BAAUC,IAAV,CAAgBC,IAAD,IAAQ;AACnB;;AAEA,UAAMC,QAAQ,IAAIC,WAAJ,CAAUF,KAAKG,IAAf,CAAd;;AAEAL,WACKM,GADL,CACS,GADT,EACc,CAACC,GAAD,EAAMC,GAAN,KAAY;;AAElBA,YAAIC,QAAJ,CAAaC,eAAKC,IAAL,CAAUC,YAAY,uBAAtB,CAAb;AACH,KAJL,EAMKN,GANL,CAMS,MANT,EAMiB,CAACC,GAAD,EAAMC,GAAN,KAAc;AACvB,YAAI;AACAA,gBAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBX,MAAMY,WAAN,EAArB,EAA0CC,GAA1C;AACH,SAFD,CAGA,OAAOC,KAAP,EAAc;AAAE,kBAAMA,KAAN;AAAa;AAChC,KAXL,EAaKX,GAbL,CAaS,iBAbT,EAa4B,CAACC,GAAD,EAAMC,GAAN,KAAc;AAClC,YAAI;AAAEA,gBAAIM,IAAJ,CAASX,MAAMe,aAAN,CAAoBX,IAAIY,MAAJ,CAAWC,SAA/B,CAAT;AAAsD,SAA5D,CAEA,OAAOH,KAAP,EAAc;AAAE,kBAAMA,KAAN;AAAa;AAChC,KAjBL,EAmBKI,IAnBL,CAmBU,MAnBV,EAmBkB,CAACd,GAAD,EAAMC,GAAN,KAAc;AACxB,YAAI;AACA,kBAAMc,UAAU,IAAIC,UAAJ,CAAShB,IAAIiB,IAAJ,CAASC,KAAlB,EAAyBlB,IAAIiB,IAAJ,CAASE,OAAlC,EAA2C,CAACnB,IAAIiB,IAAJ,CAASG,IAAV,CAA3C,CAAhB;AACAnB,gBAAIM,IAAJ,CAASX,MAAMyB,OAAN,CAAcN,OAAd,CAAT;AACA,0CAAWnB,MAAM0B,iBAAjB;AACH,SAJD,CAKA,OAAOZ,KAAP,EAAc;AAAE,kBAAMA,KAAN;AAAa;AAChC,KA1BL,EA4BKa,MA5BL,CA4BY,iBA5BZ,EA4B+B,CAACvB,GAAD,EAAMC,GAAN,KAAc;AACrC,YAAI;AACAA,gBAAIM,IAAJ,CAASX,MAAM4B,UAAN,CAAiBxB,IAAIY,MAAJ,CAAWC,SAA5B,CAAT;AACA,0CAAWjB,MAAM0B,iBAAjB;AACH,SAHD,CAIA,OAAOZ,KAAP,EAAc;AAAE,kBAAMA,KAAN;AAAa;AAChC,KAlCL,EAmCKI,IAnCL,CAmCU,iBAnCV,EAmC6B,CAACd,GAAD,EAAMC,GAAN,KAAc;AACnCA,YAAIM,IAAJ,CAASX,MAAM6B,QAAN,CAAezB,IAAIY,MAAJ,CAAWC,SAA1B,EAAqCb,IAAIiB,IAAJ,CAASC,KAA9C,EAAqDlB,IAAIiB,IAAJ,CAASE,OAA9D,EAAuE,CAACnB,IAAIiB,IAAJ,CAASG,IAAV,CAAvE,CAAT;AACA,sCAAWxB,MAAM0B,iBAAjB;AACH,KAtCL,EAwCKvB,GAxCL,CAwCS,eAxCT,EAwC0B,CAACC,GAAD,EAAMC,GAAN,KAAc;AAChCA,YAAIM,IAAJ,CAASX,MAAM8B,gBAAN,CAAuB1B,IAAIY,MAAJ,CAAWe,GAAlC,CAAT;AACH,KA1CL;AA2CH,CAhDD;;kBAkDelC,M","file":"Routes.js","sourcesContent":["import Router from 'express';\r\nimport path from 'path';\r\n\r\nimport { Note, Notes } from './Note.js';\r\nimport {getJSON, updateJSON} from './controllers/jsonHandlers';\r\n\r\n\r\n\r\nconst routes = Router()\r\n\r\ngetJSON().then((json)=>{\r\n    //We fetch the data from the JSONbin API, and set it into the notes collection.\r\n\r\n    const notes = new Notes(json.data);\r\n\r\n    routes\r\n        .get('/', (req, res)=>{\r\n        \r\n            res.sendFile(path.join(__dirname + \"/../public/index.html\"))\r\n        })\r\n\r\n        .get('/api', (req, res) => {\r\n            try {\r\n                res.status(200).send(notes.getAllNotes()).end();\r\n            }\r\n            catch (error) { throw error };\r\n        })\r\n\r\n        .get('/api/:noteTitle', (req, res) => {\r\n            try { res.send(notes.getSingleNote(req.params.noteTitle)); }\r\n\r\n            catch (error) { throw error };\r\n        })\r\n\r\n        .post(\"/api\", (req, res) => {\r\n            try {\r\n                const newNote = new Note(req.body.title, req.body.content, [req.body.tags]);\r\n                res.send(notes.addNote(newNote));\r\n                updateJSON(notes.collectionOfNotes);\r\n            }\r\n            catch (error) { throw error };\r\n        })\r\n\r\n        .delete('/api/:noteTitle', (req, res) => {\r\n            try {\r\n                res.send(notes.deleteNote(req.params.noteTitle));\r\n                updateJSON(notes.collectionOfNotes);\r\n            }\r\n            catch (error) { throw error };\r\n        })\r\n        .post('/api/:noteTitle', (req, res) => {\r\n            res.send(notes.editNote(req.params.noteTitle, req.body.title, req.body.content, [req.body.tags]));\r\n            updateJSON(notes.collectionOfNotes);\r\n        })\r\n\r\n        .get('/api/tag/:tag', (req, res) => {\r\n            res.send(notes.filterNotesByTag(req.params.tag));\r\n        })\r\n})\r\n\r\nexport default routes;\r\n\r\n"]}